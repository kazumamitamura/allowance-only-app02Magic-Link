# スキーマキャッシュのリフレッシュ完了

## ✅ 実行したコマンド

```sql
NOTIFY pgrst, 'reload schema';
```

このコマンドは、PostgRESTのスキーマキャッシュをリフレッシュするための正しいコマンドです。

## 📋 次のステップ：動作確認

### ステップ1: ブラウザのキャッシュをクリア

1. **ブラウザで `Ctrl + Shift + Delete`**（Windows）または `Cmd + Shift + Delete`（Mac）
2. **「キャッシュされたファイルと画像」**を選択して削除
3. **ブラウザを再起動**

### ステップ2: アプリケーションで動作確認

#### 2-1. お問い合わせ機能の確認

1. **アプリケーションにログイン**
2. **「📧 お問い合わせ」ボタン**をクリック
3. **件名とメッセージを入力**して送信
4. **エラーが出ないか確認**
   - ✅ 成功: 「送信成功」などのメッセージが表示される
   - ❌ エラー: エラーメッセージを確認

#### 2-2. 管理者画面の確認

1. **管理者でログイン**（`mitamuraka@haguroko.ed.jp` または `tomonoem@haguroko.ed.jp`）
2. **管理者ダッシュボード → 「📧 お問い合わせ管理」**を開く
3. **エラーが出ないか確認**
   - ✅ 成功: 問い合わせ一覧が表示される（まだ問い合わせがない場合は空のリスト）
4. **管理者ダッシュボード → 「📄 資料管理」**を開く
5. **エラーが出ないか確認**
   - ✅ 成功: 資料一覧が表示される（まだ資料がない場合は空のリスト）

#### 2-3. 規約閲覧機能の確認

1. **「📄 規約閲覧」ボタン**をクリック
2. **資料一覧が表示されるか確認**
   - まだ資料がない場合は空のリストが表示されます（正常です）

## 🔍 まだエラーが出る場合

### エラー: 「Could not find the table 'public.inquiries' in the schema cache」

**解決方法**:
1. **もう一度 `NOTIFY pgrst, 'reload schema';` を実行**
2. **数秒待つ**
3. **ブラウザをハードリロード**（`Ctrl + Shift + R`）
4. **アプリケーションで再度試す**

### エラー: 「Could not find the table 'public.documents' in the schema cache」

**解決方法**:
1. **もう一度 `NOTIFY pgrst, 'reload schema';` を実行**
2. **数秒待つ**
3. **ブラウザをハードリロード**（`Ctrl + Shift + R`）
4. **アプリケーションで再度試す**

## ✅ セットアップ完了の確認

以下のすべてが正常に動作すれば、セットアップは完了です：

- [ ] お問い合わせ機能が動作する
- [ ] 規約閲覧機能が動作する（資料がない場合は空のリストが表示される）
- [ ] 管理者画面の「お問い合わせ管理」が動作する
- [ ] 管理者画面の「資料管理」が動作する
- [ ] 資料アップロード機能が動作する（管理者のみ）
- [ ] 資料ダウンロード機能が動作する

## 📝 まとめ

- **`NOTIFY pgrst, 'reload schema';` は正しいコマンドです**
- **スキーマキャッシュは更新されました**
- **次は、ブラウザのキャッシュをクリアして、アプリケーションで動作確認してください**
